본투비루트

운영체제와 커널
	운영체제 - (https://goodmilktea.tistory.com/23)
		1.컴퓨터 시스템의 자원들을 효율적으로 관리하며, 사용자가 컴퓨터를 편리하고, 
		효과적으로 사용할 수 있도록 환경을 제공하는 프로그램들의 모임
		2.사용자와 하드웨어 간의 인터페이스로서 동작

		커널 : 컴퓨터와 전원을 킴과 동시에 운영체제도 같이 수행되는데, 이 전체를 메모리에 올라가려면
		규모가 커서 메모리 공간의 낭비가 심하기 때문에, 운영체제 중의 항상 필요한 일부분을 메모리에 올려두고
		그렇지 않은 부분을 필요할때마다 메모리에 올려서 사용하게된다. 
		이때 메모리에 상주하는 운영체제의 부분을 커널이라고 한다.

		운영체제의 목적 : 
			1. 처리능력 - 일정 시간 내에 시스템이 처리하는 일의 양
			2. 반환시간 - 시스템에 작업을 의뢰한 시간부터 처리가 완료될 때 까지 걸린 시간
			3. 사용가능도 - 시스템을 사용할 필요가 있을 떄 즉시 사용 가능한 정도
			4. 신뢰도 - 시스템이 주어진 문제를 정확하게 해결하는 정도

데비안 vs 센토스
	데비안
		1.리눅스 커널 탑재
		2.패키치 설치 및 업그레이드의 단순함 - APT 업데이트 방식이용 (다른 패키지와의 의존성 확인, 보안 업데이트 자동)
		3.전화기, 노트북, 데스크탑 및 서버 등 다양한 하드웨어에서 사용 가능
		4.안정성과 보안을 중점
		5.우분투등의 많은 리눅스 배포판의 기반이 됨
	센토스
		1.레드햇 엔터프라이즈 리눅스와 호환가능
		2.무료 기업용 컴퓨팅 플랫폼 제공을 목적
		3.현재는 무료 서비스가 종료되어 유료만 가능
		
APT vs aptitude
	APT(Advanced Packaging Tool)
		데비안 계열 배포판에서 사용
		소프트웨어 패키지의 확인,구성,설치 자동화

	aptitude
		apt의 프론트엔드 프로그램이다. 소프트웨어 패키지의 목록을 보여주고, 사용자가 패키지를 설치/삭제하도록 허용한다.
		apt-get 커맨드 라인 변수들을 제공함으로써 apt-get 의 완전한 대체 프로그램으로써 사용 가능
		aptitude가 apt보다 방대한 기능을 포함하고 있음 (apt-get과 apt-cache)
	
	APT vs aptitude
		1. 어떤 패키지를 삭제할 때, aptitude는 사용되지 않는 패키지까지 삭제한다. 반면 apt 는 사용자가 '-auto-remove', 'apt-get autoremove'를 명시해줘야 한다.
		2. 이거는 찾아보면서 되게 재밌었던 점인데, aptitude는 'why', 'why-not' 명령어를 이용해 어떤 동작이 왜 안되고 되는지를 볼 수 있다.
		3. apt는 설치, 제거 중 충돌이 일어날 경우 종료되지만 aptitude는 해결 방법을 제시할 수 있다.

SELinux vs AppArmor
	SELinux (Security Enhance Linux)
		1. 과거 리눅스는 소스코드가 공개되어 보안이 취약함 -> 이를 보완하기 위한 것이 SELinux
		2. 리눅스 커널 보안 모듈이라고도함 (리눅스 커널을 보호하기 위한 도구)
		3. Enforcing, permissive, disabled 3가지 상태 존재

	AppArmor
		1. 시스템 관리자가 프로그램 프로필 별로 프로그램의 역량을 제한할 수 있게 해주는 리눅스 커널 보안 모듈이다. 
		2. 프로필들은 네트워크 액세스, raw 소켓 액세스 그리고 파일의 읽기, 쓰기, 실행 같은 능력을 허용할 수 있다
		3. 강제적 접근 통제(MAC)를 제공함으로써 전통적인 유닉스 임의적 접근 통제(DAC) 모델을 지원
		4. 리눅스 보안 모듈(LSM) 커널 인터페이스를 사용해서 구현되었다.
		5. SELinux를 대체하는 한 부분으로서 제공되는데, 이것이 관리자들에게 설치하고 관리하기 어렵다는 
		비판이 있었기 때문이다. 파일에 라벨을 적용하는 것에 기반하는 SELinux와는 달리, AppArmor는 파일 경로를 통해 작동한다.

	SELinux vs AppArmor 
		SELinux는 경로 대신 아이노드 번호로 파일 시스템 객체들을 구별한다. 
		예를 들면 이것은 하드 링크가 생성됐을 때 아이노드에 참조되는 데이터가 같을 것이기 때문에 SELinux가 계속 새로 
		생성된 하드 링크에 대한 접근을 거부하는 것과 달리 AppArmor에서는 접근 가능해 진다.

MAC (강제적 접근통제)
	주체, 객체 등급 기반 접근 권한 부여
	1. 규칙이 단순하여 관리 용이
	2. 개인 데이터별로 명확한 보안등급을 가짐
	3. 접근 정책은 시스템에 의해서 강제적으로 정의됨
	4.. 모든 접근에 대하여 보안등급을 정의하고 확인해야하기 때문에 개발 구현이 어려움

DAC (임의적 접근 통제)
	접근 주체 신분기반 접근권한 부여
	1. 접근 권한을 객체의 소유자가 임의로 지정하는 자율적 정책
	2. 접근통제목록 등을 사용
	3. 허가된 주체에 의하여 변경 가능한 하나의 주체와 객체간의 관계를 정의
	4. 신분 도용시 통제 방법이 없음

RBAC (역할기반 접근통제)
	주체 객체 역할기반 권한 부여
	1. 주체의 역할이나 임무에 따라 객체의 접근 권한을 제어하는 방식
	2. 조직의 기능 변화나 인사 이동에 따른 관리적 업무의 효율성 증가
	3. 보안 관리가 단순하고 편리
	4. 최소 권한의 원칙, 직무 분리 원칙을 지킴
	5. 강제 접근 통제보다 보안 안전성이 낮음
	
강력한 비밀번호 정책
	libpam-pwquality 모듈 설치 (apt-get 명령어)
	1. 비밀번호 30일마다 만료되어야함 - chage -M [만료일]
	2. 비밀번호 수정 전 허용되는 최소 일 수는 2로 설정 - chage -m [일수]
	3. 사용자는 암호가 만료되기 7일 전에 경고 메시지를 받아야함 - chage -W [일수]
	4. 비밀번호는 10자이상, 대문자 및 숫자를 포함, 동일한 문자를 연속으로 3개이상 포함할 수 없음
	5. 비밀번호에 사용자의 이름이 포함되지 않아야함
	6. 비밀번호는 이전 비밀번호의 일부가 아닌 7자 이상이어야함 (루트 비밀번호 제외)
	7. 루트 비밀번호도 다음과 같은 정책을 준수해야함
	
	/etc/pam.d/common-password 파일에 pam-cracklib.so 행에 명령어 추가
	retry=N - 암호 입력 재시도 가능 횟수
	difok=N - 이전 암호와의 비교. 최소 N개 이상의 문자가 달라야 함
	minlen=N - 암호의 최소 길이
	dcredit=N - (N < 0) 암호가 포함해야 하는 숫자의 최소 개수
	            (N >= 0) 숫자에 주어지는 credit 값
	ucredit=N - 알파벳 대문자
	lcredit=N - 알파벳 소문자
	ocredit=N - 숫자 / 알파벳을 제외한 기타 문자
	minclass=N - 암호에 있어야 하는 최소 문자 종류. (숫자, 대문자, 소문자, 기타 문자) 의 네 종류 중 N 가지가 있어야 함
	maxrepeat=N - 연속된 같은 문자를 N개까지만 허용 
	maxsequence=N - 단순한 나열의 문자가 N개 이상 있는 암호 거부. N=5 인 경우 'abcde', N=4 인 경우 '9876' 등을 거부함
	maxclassrepeat=N - 같은 종류의 문자를 N개까지만 허용. N=4 인 경우 abcD는 가능하나 abcd 를 거부함
	reject_username - 암호가 계정의 이름을 포함하는지 검사.  root의 경우, root123 / Toor 등을 거부함
	enforce_for_root - root 계정에도 상기의 옵션들은 적용.
				하지만, root에게는 이전 암호를 묻지 않으므로 difok 은 적용되지 않음
	
LVM(Logical Volume Manager)
	Logical Volume을 효율적이고 유연하게 관리하기 위한 커널의 한 부분이자 프로그램
	기존 방식이 파일시스템을 블록 장치에 직접 접근해서 읽고 쓰기를 했다면 
	LVM은 LVM이 만든 가상의 블록 장치에 입출력을 하게 됨
	https://tech.cloud.nongshim.co.kr/2018/11/23/lvmlogical-volume-manager-1-%EA%B0%9C%EB%85%90/

Su 명령어
	1.사용자 변경 명령어
	2. - <붙이게 되면 루트 디렉토리의 환경변수를 가져옴

Sudo 설치
	1. 루트계정으로 로그인
	2. Apt-get을 이용하여 sudo 설치
	3. 로그 파일 경로 생성 (/var/log/sudo/)
	4. Sudo 설정을 위해 /etc/sudoers 파일 열기 
		(visudo 명령 쓰기 -> 써야하는 이유 : 
			vi 명령어로 열면 해당 파일을 readonly로 만 열리기 때문에 수정 하여 저장을 할 수 없다.

			또한, /etc/sudoers 파일을 내에도 "This file must be edited with the 'visudo' command." 
			와 같이 sudo visudo 명령어를 통해서 수정하기를 권고 하고 있다.)
	https://www.freebsd.org/cgi/man.cgi?query=sudoers&apropos=0&sektion=0&manpath=FreeBSD+13.0-RELEASE+and+Ports&arch=default&format=html

	sudo 그룹 구성
		1. 비밀번호 3회 시도 제한 (passwd_tries)
		2. 비밀번호 오류 시 사용자 지정 메시지 표시 (badpass_message) sudo 인증 실패 메시지 (authfail_message)
		3. Sudo 입출력에 대한 로그 파일 지정 (/var/log/sudo) (log_input)(log_output)(iolog_dir)
		4. Tty 모드 활성화 (requiretty) - TTY(teletypewriter) : 콘솔 or 터미널
		5. Sudo 사용가능한 경로 제한 (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/sbin:/sbin:/snap/bin)

UFW (Uncomplicated Firewall)
	데비안 계열 및 다양한 리눅스 환경에서 작동되는 사용하기 쉬운 방화벽 관리 프로그램
	'UFW'는 사용하기 쉽게 설계된 넷필터 방화벽을 관리하는 프로그램이다. 
	간단한 명령 및 명령수가 적은 명령줄 인터페이스를 사용하는것이 특징이며 프로그램 구성에는 iptables를 사용한다.

	1. Sudo apt로 ufw 설치
	2. 명령어
		ufw disable : 방화벽 비활성화
		ufw status : 방화벽 상태확인
		ufw.enable : 방화벽 활성화
		ufw allow [포트번호] : 해당 포트번호 허용
		ufw deny [포트번호] : 해당 포트번호 막기
		ufw delete 명령어 [포트번호] : 포트번호에 대한 설정 삭제

넷필터 방화벽
	 리눅스 커널 내부의 네트워크 관련 프레임워크이다. 
	다양한 네트워크 관련 연산을 핸들러 형태로 구현할 수 있도록 훅(hook)을 제공한다.

I-tables
	 시스템 관리자가 리눅스 커널 방화벽(다른 넷필터 모듈로 구현됨)이 제공하는 테이블들과 
	그것을 저장하는 체인, 규칙들을 구성할 수 있게 해주는 사용자 공간 응용 프로그램이다. 

Ssh 
	SSH는 Secure Shell의 줄임말로, 원격 호스트에 접속하기 위해 사용되는 보안 프로토콜
	기존 원격 접속인 텔넷은 보안상 문제가 있어 ssh가 등장
	ssh 작동원리
	사용자(클라이언트)와 서버(호스트)는 각각의 키를 보유하고 있으며, 
	이 키를 이용해 연결 상대를 인증하고 안전하게 데이터를 주고 받게됨
	여기서 키를 생성하는 방식이 두 가지가 있는데 ‘대칭키’와 ‘비대칭키(또는 공개 키)’ 방식

	대칭키
		사용자 또는 서버는 하나의 대칭 키를 만들어 서로 공유함 
		공유된 대칭 키를 이용해 정보를 암호화하면, 받은 쪽에서 동일한 대칭 키로 암호를 풀어 정보를 습득
		정보 교환이 완료되면 교환 당시 썼던 대칭 키는 폐기되고, 나중에 다시 접속할 때마다 새로운 대칭 키를 생성하여 사용

	비대칭키
		서버 또는 사용자는 키 페어를 생성 ( 공개키, 비밀키 )
		사용자가 키페어를 생성하면, 서버에서 공개키를 전송
		사용자는 자신의 개인 키를 이용하여 인증하고 서버에 재전송
		서버는 해당 인증을 확인하고 사용자에게 접속을 허용
		
포트포워딩
	외부에서 집에 있는 공유기가 할당받은 IP에 접속한 후, 
	공유기에 연결되어 있는 장치의 포트를 접근하기 위한 이정표

	외부에서 해당 포트번호로 네트워크 연결을 하게되면,
	해당 포트번호에 해당하는 내부 ip주소로 매핑을 시켜주는 형태

모니터링 쉘 스크립트
	uname -a
		os 및 커널 릴리즈 정보	

	cat /proc/cpuinfo | grep 'cpu cores'
		cpu 물리 프로세스 개수

	cat /proc/cpuinfo | grep 'processor'
		cpu 가상 프로세스 개수
	https://www.cyberciti.biz/faq/check-how-many-cpus-are-there-in-linux-system/	

	free -m
		메모리 사용량 mb 단위로 보기

	df --total : 슬랙 스레드
		디스크 공간 사용량 mb 단위로 보기
		tmpfs : tmpfs (임시 파일 시스템) 가상 메모리에 파일을 보관
		udev : udev 파일 시스템에 연결된 장치 (usb, 네트워크카드, cd rom) 관련된 정보 저장

	mpstat : https://meongj-devlog.tistory.com/171
		sysstat 패키지에 포함되어 있는 명령어
		현재 cpu의 사용량을 출력

	who -b : https://keichee.tistory.com/284
		마지막 부팅 시각 출력

	grep /bin/bash /etc/passwd | wc -l
		https://overcode.tistory.com/entry/%EB%A6%AC%EB%88%85%EC%8A%A4-%EC%82%AC%EC%9A%A9%EC%9E%90-%EB%AA%A9%EB%A1%9D-%ED%99%95%EC%9D%B8-Linux-User-List
		사용자 계정 조회 (root 포함)

	ip addr show dev [인터페이스]
		해당 인터페이스의 네트워크 정보 출력

	리눅스 로그 파일 https://sisiblog.tistory.com/24
		auth.log에서 sudo command만 grep

크론탭
	crontab -e : 크론탭 명령어 수정
	crontab -l : 크론탭 명령어 조회
	crontab -r : 크론탭 명령어 삭제

	주기 설정
	*　　　      *　　　　    *　　　　　　 *　　　　　　  *
	분(0-59)　　시간(0-23)　　일(1-31)　　월(1-12)　　　요일(0-7)

wall
	리눅스 사용자에게 해당 메시지를 전송하는 명령어

user 생성/비밀번호변경
	adduser userid
	sudo passwd 사용자이름

그룹 생성/조회/삭제/사용자할당
	생성 : groupadd 그룹이름
	조회 : groups
	삭제 : groupdel 그룹이름
	사용자할당 : gpasswd -a 사용자이름 그룹이름

hostnamectl
	현재 호스트네임 조회
	hostnamectl set-hostname --static 호스트이름